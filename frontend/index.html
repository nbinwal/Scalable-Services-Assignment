<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bookstore Demo UI</title>
  <style>
    body{font-family:Arial;margin:20px}
    pre{background:#f2f2f2;padding:10px;border-radius:6px}
    input, button {padding:6px}
    .row{margin-bottom:10px}
  </style>
</head>
<body>
  <h2>Bookstore Demo</h2>

  <div class="row">
    <strong>Gateway URL:</strong> <input id="gateway" value="" size="45"> <small>(set this to http://&lt;minikube-ip&gt;:30080)</small>
  </div>

  <h3>Create Book</h3>
  <div class="row">
    Title: <input id="book_title" value="Sample Book"> Author: <input id="book_author" value="Author"> Price: <input id="book_price" value="9.99">
    <button onclick="createBook()">Create</button>
  </div>

  <h3>Books</h3>
  <div class="row">
    <button onclick="listBooks()">List books</button>
  </div>

  <h3>Create User</h3>
  <div class="row">
    Name: <input id="user_name" value="Alice"> Email: <input id="user_email" value="alice@example.com"> <button onclick="createUser()">Create User</button>
  </div>

  <h3>Place Order</h3>
  <div class="row">
    User ID: <input id="order_user" value="1"> Book ID: <input id="order_book" value=""> Qty: <input id="order_qty" value="1"> <button onclick="placeOrder()">Place</button>
  </div>

  <h3>Response</h3>
  <pre id="out">â€”</pre>

<script>
function gw(){ return document.getElementById('gateway').value.trim(); }
function show(o){ document.getElementById('out').textContent = JSON.stringify(o, null, 2); }

async function createBook(){
  const url = gw() + '/books';
  const res = await fetch(url, {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ title: document.getElementById('book_title').value, author: document.getElementById('book_author').value, price: parseFloat(document.getElementById('book_price').value) })
  });
  show(await res.json());
}

async function listBooks(){
  const res = await fetch(gw() + '/books');
  show(await res.json());
}

async function createUser(){
  const res = await fetch(gw() + '/users', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ name: document.getElementById('user_name').value, email: document.getElementById('user_email').value })
  });
  show(await res.json());
}

async function placeOrder(){
  const res = await fetch(gw() + '/orders', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ user_id: parseInt(document.getElementById('order_user').value||'1'), book_id: document.getElementById('order_book').value, qty: parseInt(document.getElementById('order_qty').value||'1') })
  });
  show(await res.json());
}
</script>
</body>
</html>